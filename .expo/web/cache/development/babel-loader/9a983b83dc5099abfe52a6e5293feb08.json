{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport NativeModules from \"react-native-web/dist/exports/NativeModules\";\nimport { initialiseNativeModuleEventEmitter } from \"./events\";\nimport INTERNALS from \"./internals\";\nvar NATIVE_MODULES = {};\n\nvar nativeWithArgs = function nativeWithArgs(NativeModule, argToPrepend) {\n  var native = {};\n  var methods = Object.keys(NativeModule);\n\n  var _loop = function _loop(i, len) {\n    var method = methods[i];\n\n    if (typeof NativeModule[method] === 'function') {\n      native[method] = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return NativeModule[method].apply(NativeModule, [].concat(_toConsumableArray(argToPrepend), args));\n      };\n    } else {\n      native[method] = NativeModule[method];\n    }\n  };\n\n  for (var i = 0, len = methods.length; i < len; i++) {\n    _loop(i, len);\n  }\n\n  return native;\n};\n\nvar nativeModuleKey = function nativeModuleKey(module) {\n  return (module._customUrlOrRegion || module.app.name) + \":\" + module.namespace;\n};\n\nexport var getNativeModule = function getNativeModule(module) {\n  return NATIVE_MODULES[nativeModuleKey(module)];\n};\nexport var initialiseNativeModule = function initialiseNativeModule(module, config, customUrlOrRegion) {\n  var moduleName = config.moduleName,\n      hasMultiAppSupport = config.hasMultiAppSupport,\n      hasCustomUrlSupport = config.hasCustomUrlSupport,\n      hasRegionsSupport = config.hasRegionsSupport,\n      namespace = config.namespace;\n  var nativeModule = NativeModules[moduleName];\n  var key = nativeModuleKey(module);\n\n  if (!nativeModule && namespace !== 'utils') {\n    throw new Error(INTERNALS.STRINGS.ERROR_MISSING_MODULE(namespace, moduleName));\n  }\n\n  var argToPrepend = [];\n\n  if (hasMultiAppSupport) {\n    argToPrepend.push(module.app.name);\n  }\n\n  if (hasCustomUrlSupport || hasRegionsSupport) {\n    argToPrepend.push(customUrlOrRegion);\n  }\n\n  if (argToPrepend.length) {\n    NATIVE_MODULES[key] = nativeWithArgs(nativeModule, argToPrepend);\n  } else {\n    NATIVE_MODULES[key] = nativeModule;\n  }\n\n  initialiseNativeModuleEventEmitter(module, config);\n  return NATIVE_MODULES[key];\n};","map":{"version":3,"sources":["C:/Users/fong/Desktop/code-18122020-combined/node_modules/react-native-firebase/dist/utils/native.js"],"names":["initialiseNativeModuleEventEmitter","INTERNALS","NATIVE_MODULES","nativeWithArgs","NativeModule","argToPrepend","native","methods","Object","keys","i","len","method","args","length","nativeModuleKey","module","_customUrlOrRegion","app","name","namespace","getNativeModule","initialiseNativeModule","config","customUrlOrRegion","moduleName","hasMultiAppSupport","hasCustomUrlSupport","hasRegionsSupport","nativeModule","NativeModules","key","Error","STRINGS","ERROR_MISSING_MODULE","push"],"mappings":";;AACA,SAASA,kCAAT;AACA,OAAOC,SAAP;AACA,IAAMC,cAAc,GAAG,EAAvB;;AAOA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,YAAD,EAAeC,YAAf,EAAgC;AACrD,MAAMC,MAAM,GAAG,EAAf;AACA,MAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYL,YAAZ,CAAhB;;AAFqD,6BAI5CM,CAJ4C,EAIrCC,GAJqC;AAKnD,QAAMC,MAAM,GAAGL,OAAO,CAACG,CAAD,CAAtB;;AAEA,QAAI,OAAON,YAAY,CAACQ,MAAD,CAAnB,KAAgC,UAApC,EAAgD;AAC9CN,MAAAA,MAAM,CAACM,MAAD,CAAN,GAAiB;AAAA,0CAAIC,IAAJ;AAAIA,UAAAA,IAAJ;AAAA;;AAAA,eAAaT,YAAY,CAACQ,MAAD,CAAZ,OAAAR,YAAY,+BAAgBC,YAAhB,GAAiCQ,IAAjC,EAAzB;AAAA,OAAjB;AACD,KAFD,MAEO;AACLP,MAAAA,MAAM,CAACM,MAAD,CAAN,GAAiBR,YAAY,CAACQ,MAAD,CAA7B;AACD;AAXkD;;AAIrD,OAAK,IAAIF,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGJ,OAAO,CAACO,MAA9B,EAAsCJ,CAAC,GAAGC,GAA1C,EAA+CD,CAAC,EAAhD,EAAoD;AAAA,UAA3CA,CAA2C,EAApCC,GAAoC;AAQnD;;AAED,SAAOL,MAAP;AACD,CAfD;;AAiBA,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,MAAM;AAAA,UAAOA,MAAM,CAACC,kBAAP,IAA6BD,MAAM,CAACE,GAAP,CAAWC,IAA/C,UAAuDH,MAAM,CAACI,SAA9D;AAAA,CAA9B;;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAL,MAAM;AAAA,SAAId,cAAc,CAACa,eAAe,CAACC,MAAD,CAAhB,CAAlB;AAAA,CAA9B;AACP,OAAO,IAAMM,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACN,MAAD,EAASO,MAAT,EAAiBC,iBAAjB,EAAuC;AAAA,MAEzEC,UAFyE,GAOvEF,MAPuE,CAEzEE,UAFyE;AAAA,MAGzEC,kBAHyE,GAOvEH,MAPuE,CAGzEG,kBAHyE;AAAA,MAIzEC,mBAJyE,GAOvEJ,MAPuE,CAIzEI,mBAJyE;AAAA,MAKzEC,iBALyE,GAOvEL,MAPuE,CAKzEK,iBALyE;AAAA,MAMzER,SANyE,GAOvEG,MAPuE,CAMzEH,SANyE;AAQ3E,MAAMS,YAAY,GAAGC,aAAa,CAACL,UAAD,CAAlC;AACA,MAAMM,GAAG,GAAGhB,eAAe,CAACC,MAAD,CAA3B;;AAEA,MAAI,CAACa,YAAD,IAAiBT,SAAS,KAAK,OAAnC,EAA4C;AAC1C,UAAM,IAAIY,KAAJ,CAAU/B,SAAS,CAACgC,OAAV,CAAkBC,oBAAlB,CAAuCd,SAAvC,EAAkDK,UAAlD,CAAV,CAAN;AACD;;AAID,MAAMpB,YAAY,GAAG,EAArB;;AAEA,MAAIqB,kBAAJ,EAAwB;AACtBrB,IAAAA,YAAY,CAAC8B,IAAb,CAAkBnB,MAAM,CAACE,GAAP,CAAWC,IAA7B;AACD;;AAED,MAAIQ,mBAAmB,IAAIC,iBAA3B,EAA8C;AAC5CvB,IAAAA,YAAY,CAAC8B,IAAb,CAAkBX,iBAAlB;AACD;;AAED,MAAInB,YAAY,CAACS,MAAjB,EAAyB;AACvBZ,IAAAA,cAAc,CAAC6B,GAAD,CAAd,GAAsB5B,cAAc,CAAC0B,YAAD,EAAexB,YAAf,CAApC;AACD,GAFD,MAEO;AACLH,IAAAA,cAAc,CAAC6B,GAAD,CAAd,GAAsBF,YAAtB;AACD;;AAED7B,EAAAA,kCAAkC,CAACgB,MAAD,EAASO,MAAT,CAAlC;AACA,SAAOrB,cAAc,CAAC6B,GAAD,CAArB;AACD,CAnCM","sourcesContent":["import { NativeModules } from 'react-native';\nimport { initialiseNativeModuleEventEmitter } from './events';\nimport INTERNALS from './internals';\nconst NATIVE_MODULES = {};\n/**\n * Prepends all arguments in prependArgs to all native method calls\n * @param NativeModule\n * @param argToPrepend\n */\n\nconst nativeWithArgs = (NativeModule, argToPrepend) => {\n  const native = {};\n  const methods = Object.keys(NativeModule);\n\n  for (let i = 0, len = methods.length; i < len; i++) {\n    const method = methods[i];\n\n    if (typeof NativeModule[method] === 'function') {\n      native[method] = (...args) => NativeModule[method](...[...argToPrepend, ...args]);\n    } else {\n      native[method] = NativeModule[method];\n    }\n  }\n\n  return native;\n};\n\nconst nativeModuleKey = module => `${module._customUrlOrRegion || module.app.name}:${module.namespace}`;\n\nexport const getNativeModule = module => NATIVE_MODULES[nativeModuleKey(module)];\nexport const initialiseNativeModule = (module, config, customUrlOrRegion) => {\n  const {\n    moduleName,\n    hasMultiAppSupport,\n    hasCustomUrlSupport,\n    hasRegionsSupport,\n    namespace\n  } = config;\n  const nativeModule = NativeModules[moduleName];\n  const key = nativeModuleKey(module);\n\n  if (!nativeModule && namespace !== 'utils') {\n    throw new Error(INTERNALS.STRINGS.ERROR_MISSING_MODULE(namespace, moduleName));\n  } // used by the modules that extend ModuleBase\n  // to access their native module counterpart\n\n\n  const argToPrepend = [];\n\n  if (hasMultiAppSupport) {\n    argToPrepend.push(module.app.name);\n  }\n\n  if (hasCustomUrlSupport || hasRegionsSupport) {\n    argToPrepend.push(customUrlOrRegion);\n  }\n\n  if (argToPrepend.length) {\n    NATIVE_MODULES[key] = nativeWithArgs(nativeModule, argToPrepend);\n  } else {\n    NATIVE_MODULES[key] = nativeModule;\n  }\n\n  initialiseNativeModuleEventEmitter(module, config);\n  return NATIVE_MODULES[key];\n};"]},"metadata":{},"sourceType":"module"}