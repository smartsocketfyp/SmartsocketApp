{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\fong\\\\Desktop\\\\Fong JY\\\\NUS\\\\Year 4 Semester 2\\\\EE4002D - Design Capstone\\\\Software Code\\\\code-18122020-combined\\\\Screens\\\\OnOffScreen.js\";\nimport * as React from 'react';\nimport { useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport firebase from 'firebase/app';\nimport \"firebase/auth\";\nimport 'firebase/database';\n\nfunction OnOffScreen(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var data = route.params;\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      Status = _React$useState2[0],\n      setStatus = _React$useState2[1];\n\n  useEffect(function () {\n    setInterval(function () {\n      return readData({\n        data: data\n      });\n    }, 1000);\n  });\n\n  var handleSwitch = function handleSwitch(_ref2) {\n    var Status = _ref2.Status;\n    var user = firebase.auth().currentUser;\n    firebase.database().ref('/Socket ID/' + data.slice(17, 20)).once('value').then(function (snapshot) {\n      setStatus(snapshot.val() && snapshot.val().SocketOn);\n    });\n\n    if (Status === false) {\n      firebase.database().ref('/Socket ID/' + data.slice(17, 20)).update({\n        SocketOn: true,\n        User_Email: user.email\n      }).then(function (data) {\n        console.log('data', data);\n      }).catch(function (error) {\n        console.log('error', error);\n      });\n    } else if (Status === true) {\n      firebase.database().ref('/Socket ID/' + data.slice(17, 20)).update({\n        SocketOn: false,\n        User_Email: user.email\n      }).then(function (data) {\n        console.log('data', data);\n      }).catch(function (error) {\n        console.log('error', error);\n      });\n    } else {\n      alert(\"Please wait a while\");\n    }\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.Instructions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \" Socket No. \", data.slice(17, 20), \" \", 'is currently \\n', Status ? 'switched on' : 'switched off'), React.createElement(TouchableOpacity, {\n    style: Status ? styles.Off_Button : styles.On_Button,\n    onPress: function onPress() {\n      return handleSwitch({\n        Status: Status\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.Button_Text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, Status ? 'Switch off Socket' : 'Switch on Socket')), React.createElement(TouchableOpacity, {\n    style: styles.Navigation_Button,\n    onPress: function onPress() {\n      return navigation.navigate(\"Main Function\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.Button_Text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \" Return to functions page \")));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  Instructions: {\n    textAlign: 'center',\n    marginLeft: 25,\n    marginRight: 25,\n    marginTop: 200,\n    marginBottom: 25,\n    color: \"#000\",\n    fontWeight: \"300\",\n    fontSize: 20\n  },\n  Off_Button: {\n    backgroundColor: '#800000',\n    borderRadius: 4,\n    height: 52,\n    width: 300,\n    marginTop: 25,\n    marginBottom: 25,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  On_Button: {\n    backgroundColor: '#008000',\n    borderRadius: 4,\n    height: 52,\n    width: 300,\n    marginTop: 25,\n    marginBottom: 25,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  Navigation_Button: {\n    backgroundColor: '#000080',\n    borderRadius: 4,\n    height: 52,\n    width: 300,\n    marginTop: 25,\n    marginBottom: 250,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  Button_Text: {\n    color: \"#FFF\",\n    fontWeight: \"600\"\n  }\n});\nexport default OnOffScreen;","map":{"version":3,"sources":["C:/Users/fong/Desktop/Fong JY/NUS/Year 4 Semester 2/EE4002D - Design Capstone/Software Code/code-18122020-combined/Screens/OnOffScreen.js"],"names":["React","useEffect","firebase","OnOffScreen","route","navigation","data","params","useState","Status","setStatus","setInterval","readData","handleSwitch","user","auth","currentUser","database","ref","slice","once","then","snapshot","val","SocketOn","update","User_Email","email","console","log","catch","error","alert","styles","container","Instructions","Off_Button","On_Button","Button_Text","Navigation_Button","navigate","StyleSheet","create","flex","alignItems","justifyContent","backgroundColor","textAlign","marginLeft","marginRight","marginTop","marginBottom","color","fontWeight","fontSize","borderRadius","height","width"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {useEffect} from \"react\";\r\nimport { View, Text, TouchableOpacity, StyleSheet} from 'react-native';\r\nimport firebase from 'firebase/app';\r\nimport \"firebase/auth\";\r\nimport 'firebase/database';\r\n\r\nfunction OnOffScreen( {route, navigation} ) {\r\n    let data = route.params;\r\n    const [Status, setStatus] = React.useState('');\r\n    //const [currenttime, setcurrenttime] = React.useState('');\r\n\r\n    useEffect(() => {\r\n        setInterval(() => readData({data}), 1000);\r\n    });\r\n\r\n    //const readData = ({data}) => {\r\n    //    firebase.database().ref('/Socket ID/' + data.slice(17,20)).once('value').then((snapshot) => {\r\n    //    setStatus(snapshot.val() && snapshot.val().SocketOn) ;\r\n    //    })\r\n    //};\r\n\r\n    const handleSwitch = ({Status}) => {\r\n        var user = firebase.auth().currentUser;\r\n\r\n        firebase.database().ref('/Socket ID/' + data.slice(17,20)).once('value').then((snapshot) => {\r\n            setStatus(snapshot.val() && snapshot.val().SocketOn) ;\r\n            })\r\n\r\n        if(Status === false){\r\n            firebase.database().ref('/Socket ID/' + data.slice(17,20)).update({\r\n                SocketOn: true,\r\n                User_Email: user.email\r\n            }).then((data) => {\r\n                console.log('data', data)\r\n            }).catch((error) => {\r\n                console.log('error', error)\r\n            })\r\n        }\r\n\r\n        else if(Status === true){\r\n            firebase.database().ref('/Socket ID/' + data.slice(17,20)).update({\r\n                SocketOn: false,\r\n                User_Email: user.email\r\n            }).then((data) => {\r\n                console.log('data', data)\r\n            }).catch((error) => {\r\n                console.log('error', error)\r\n            })\r\n        }\r\n\r\n        else{\r\n            alert(\"Please wait a while\")\r\n        }\r\n    }\r\n\r\n    \r\n    return (        \r\n        \r\n        <View style={styles.container}>\r\n            <Text style = {styles.Instructions}> Socket No. {data.slice(17,20)} {'is currently \\n'}  \r\n                 {(Status) ? 'switched on' : 'switched off'}\r\n            </Text>            \r\n\r\n            <TouchableOpacity\r\n                    style = {\r\n                        (Status)?\r\n                        styles.Off_Button: styles.On_Button}\r\n                    onPress={() => handleSwitch({Status})}\r\n                >\r\n                <Text style = {styles.Button_Text}> \r\n                    {(Status) ? 'Switch off Socket' : 'Switch on Socket'} \r\n                </Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n                    style={styles.Navigation_Button}\r\n                    onPress={() => navigation.navigate(\"Main Function\")}\r\n                >\r\n                <Text style = {styles.Button_Text}> Return to functions page </Text>\r\n            </TouchableOpacity>  \r\n        \r\n        </View>\r\n      \r\n    );\r\n  }\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex : 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#fff',\r\n    },\r\n    \r\n    Instructions: {\r\n        textAlign: 'center',\r\n        marginLeft: 25,\r\n        marginRight: 25,\r\n        marginTop: 200,\r\n        marginBottom: 25,\r\n        color: \"#000\", \r\n        fontWeight: \"300\", \r\n        fontSize: 20\r\n    },\r\n\r\n    Off_Button: {\r\n        backgroundColor : '#800000',\r\n        borderRadius : 4,\r\n        height: 52,\r\n        width : 300,\r\n        marginTop: 25,\r\n        marginBottom: 25,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n\r\n    On_Button: {\r\n        backgroundColor : '#008000',\r\n        borderRadius : 4,\r\n        height: 52,\r\n        width : 300,\r\n        marginTop: 25,\r\n        marginBottom: 25,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n\r\n    Navigation_Button: {\r\n        backgroundColor : '#000080',\r\n        borderRadius : 4,\r\n        height: 52,\r\n        width : 300,\r\n        marginTop: 25,\r\n        marginBottom: 250,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n\r\n    Button_Text: {\r\n        color: \"#FFF\",\r\n        fontWeight: \"600\"\r\n    },\r\n});\r\n\r\nexport default OnOffScreen;"]},"metadata":{},"sourceType":"module"}